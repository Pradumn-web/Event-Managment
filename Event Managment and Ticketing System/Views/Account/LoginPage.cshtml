
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>LoginPage</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
</head>
<body class="bg-primary bg-gradient d-flex align-items-center justify-content-center vh-100">

    <div class="card shadow-lg" style="width: 100%; max-width: 400px;">
        <div class="card-body p-4">

            <div class="text-center mb-4">
                <i class="bi bi-person-circle text-primary" style="font-size: 3rem;"></i>
                <h4 class="mt-2">Admin Login</h4>
            </div>

            <!-- Login Form -->
            <form action="/Account/Login" method="post">
                <div class="mb-3">
                    <label for="username" class="form-label">Username</label>
                    <input type="text" class="form-control" id="username" name="username" placeholder="Enter username" required>
                    <span id="usernameError"></span>
                </div>

                <div class="mb-3">
                    <label for="password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="password" name="password" placeholder="Enter password" required>
                    <span id="passwordError"></span>
                </div>

                <div class="d-grid mb-2">
                    <button type="button" onclick="Logindata()" class="btn btn-primary">Login</button>
                </div>
            </form>

            <p class="text-center text-muted mt-3" style="font-size: 0.9rem;">&copy; 2025 Admin Panel</p>
        </div>
    </div>

</body>
</html>
<script>
    //$(document).ready(function () {
    //    debugger;
    //    if (window.history && window.history.pushState) {
    //        window.history.pushState(null, null, window.location.href);
    //    }
    //});

    $(document).ready(function () {
        // Prevent back button navigation after logout
        if (window.history && window.history.pushState) {
            // Push the current state
            window.history.pushState(null, null, window.location.href);

            // Listen for popstate events (back button)
            window.addEventListener('popstate', function () {
                // Push the current state again to prevent going back
                window.history.pushState(null, null, window.location.href);

                // Optional: Show a message
                alert('Please use the login form to access the system.');
            });
        }

        // Additional protection for older browsers
        if (typeof (window.history.pushState) !== 'function') {
            // Fallback for older browsers
            window.history.forward();
            function noBack() {
                window.history.forward();
            }
            setTimeout("noBack()", 0);
            window.onunload = function () { null };
        }
    });

    function Logindata() {
        @*validation start*@
        var u = $('#username').val();
        if (u == "") {
            $('#usernameError').text('Name is required').css('color', 'red');;
            return;
        } else {
            $('#usernameError').text('');
        }

        var p = $('#password').val();
        if (p == "") {
            $('#passwordError').text('Password is required').css('color', 'red');;
            return;
        } else {
            $('#passwordError').text('');
        }
        @*Validation End*@
        var a = {
            Username: $('#username').val(),
            Password: $('#password').val()
        }
        $.ajax({
            url: '/Account/LoginPage',
            type: 'Post',
            data: { a },
            success: function (response) {
                if (response.success) {
                    alert(response.message);
                    window.location.href = '/Admin/AdminPannel';
                }
                else {
                    alert(response.message);
                }
            }

            
        })
    }
</script>
